/**
 * timedropper-ex
 * @version v1.4.4
 * @link https://allanjamesvestal.github.io/TimeDropper-Ex/
 * @license MIT
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery","moment"],e):"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("jquery"),require("moment")):e(jQuery,moment)}(function(e,t){"use strict";e.TDExLang=e.extend({"default":"en",en:{am:"AM",pm:"PM",reset:"Reset"}},e.TDExLang),e.fn.timeDropper=function(a){function n(){var t=i(z.locale),n=t[0];z.fblocalizer=t[1];var r=z.locale;if(a.language)a.language in e.TDExLang&&(r=a.language);else{var l=navigator.languages||navigator.userLanguage||(navigator.language?[navigator.language]:[navigator.browserLanguage]);for(var o in l){var d=l[o].toLowerCase();if(d in e.TDExLang){r=d;break}}}t=i(r),z.locale=t[0],z.localizer=t[1];var s=z.formatter.locale();a.language&&z.formatter.locale(a.language).locale()===a.language||z.formatter.locale(z.locale).locale()!==z.locale&&z.formatter.locale(r).locale()!==r&&z.formatter.locale(n).locale()!==n&&z.formatter.locale(s),z.formatter.utc().startOf("day"),z.wrapper=j(e(".td-clock").length),(a.container||e("body")).append(z.wrapper),z.el.lancet=z.wrapper.find(".td-lancette"),z.el.lancet_ptr=z.wrapper.find(".td-pointer"),z.el.lancet_hr=z.el.lancet.find(".td-hr"),z.el.lancet_min=z.el.lancet.find(".td-min"),z.el.hr=z.wrapper.find(".td-hr"),z.el.min=z.wrapper.find(".td-min"),z.el.dail=z.wrapper.find(".td-dail"),z.el.dail_handle=z.el.dail.find(".td-handle"),z.el.dail_rail=z.el.dail.find("svg"),z.el.medirian=z.wrapper.find(".td-medirian"),z.el.medirian_spans=z.el.medirian.find("span"),z.el.medirian_am=z.el.medirian.find(".td-am"),z.el.medirian_pm=z.el.medirian.find(".td-pm"),z.el.medirian_now=z.el.medirian.find(".td-now"),z.el.time=z.wrapper.find(".td-time"),z.el.time_spans=z.el.time.find("span"),z.el.time_hr=z.el.time.find(".td-hr"),z.el.time_min=z.el.time.find(".td-min"),a.showLancets||z.el.lancet.css("display","none"),a.dropTrigger||z.wrapper.addClass("nodrop"),z.wrapper.attr("unselectable","on").css("user-select","none").bind("selectstart",function(e){return e.preventDefault(),!1}),z.el.time_spans.on("click",f),a.alwaysOpen||z.wrapper.on("click",p),a.meridians&&(z.el.medirian_am.on("click",g),z.el.medirian_pm.on("click",g),z.el.medirian_now.on("click",v)),z.el.dail_rail.on("touchstart mousedown",w),a.mousewheel&&z.wrapper.on("mousewheel",y)}function r(e){if(!z.wrapper){if(void 0!==z.wrapper)throw new Error("Already destroyed");if(e)throw new Error("Not yet initialized")}}function i(t){for(var a=e.TDExLang[t];a.constructor===String;)t=a,a=e.TDExLang[a];return[t,a]}function l(e){return z.localizer[e]||z.fblocalizer[e]||"??"}function o(e){return e<10?"0"+e:e}function d(e){var n=e&&e.constructor==String?e.trim():void 0;if(n){var r=t(n,a.format,z.formatter.locale(),!0);n=r.isValid()?r.utc().toDate():void 0}return n}function s(e,t,n){return z.formatter.hour(e).minute(t).second(n),z.formatter.format(a.format)}function c(e,t){var n=z.time!=e;if(!t&&z.followTime&&(clearInterval(z.followTime),z.followTime=null,z.el.medirian_now.addClass("td-on"),n=!0),n){z.time=e%86400,z.time<0&&(z.time+=86400);var r=Math.floor(z.time/3600),i=z.time%3600,l=Math.floor(i/60),d=360*i/3600,c=360*r/12;z.h_deg=c%360+d/12,z.m_deg=d,z.pm=r>=12,z.el.lancet_hr.css("transform","rotate("+z.h_deg+"deg)"),z.el.lancet_min.css("transform","rotate("+z.m_deg+"deg)"),z.el.lancet_hr.css("-webkit-transform","rotate("+z.h_deg+"deg)"),z.el.lancet_min.css("-webkit-transform","rotate("+z.m_deg+"deg)"),z.el.time_hr.attr("data-id",r).text(o(a.meridians&&r>12?r-12:r)),z.el.time_min.attr("data-id",l).text(o(l)),a.meridians&&(z.pm?(z.el.medirian_am.removeClass("td-on"),z.el.medirian_pm.addClass("td-on")):(z.el.medirian_am.addClass("td-on"),z.el.medirian_pm.removeClass("td-on"))),z.selector&&(z.selector.hasClass("td-hr")?(z.el.dail.css("transform","rotate("+z.h_deg+"deg)"),z.el.dail.css("-webkit-transform","rotate("+z.h_deg+"deg)")):(z.el.dail.css("transform","rotate("+z.m_deg+"deg)"),z.el.dail.css("-webkit-transform","rotate("+z.m_deg+"deg)")));var m=s(r,l,i%60);a.putTime.call(z.anchor[0],m),z.anchor.trigger("TDEx-update",{dailing:z.dailing,selector:z.selector?z.selector.hasClass("td-hr")?"hr":"min":null,now:t,time:[z.time,m]})}}function m(e){var t=z.time%3600,n=Math.round(3600*e/360);if(a.stickyMinute>1){var r=n%60,i=60-r;if((r<a.stickyMinute||i<a.stickyMinute)&&(n=(n-r+(r<a.stickyMinute?0:60))%3600,e=360*n/3600),e==z.m_deg)return}var l=e>z.m_deg?e-z.m_deg:z.m_deg-e,o=l<=180?0:e<z.m_deg?3600:-3600;c(z.time-t+n+o)}function u(e){var t=z.time%43200,n=Math.round(3600*e*12/360);if(a.stickyHour>1){var r=n%3600,i=3600-r;if((r<a.stickyHour||i<a.stickyHour)&&(n=(n-r+(r<a.stickyHour?0:3600))%43200,e=360*n/43200),e==z.h_deg)return}var l=e>z.h_deg?e-z.h_deg:z.h_deg-e,o=l<=180?0:e<z.h_deg?43200:-43200;c(z.time-t+n+o)}function h(e){z.selector=e,z.selector?(z.selector.hasClass("td-hr")?(z.el.hr.addClass("td-on"),z.el.min.removeClass("td-on"),z.select_deg=z.h_deg):(z.el.hr.removeClass("td-on"),z.el.min.addClass("td-on"),z.select_deg=z.m_deg),z.el.dail.addClass("td-n"),z.el.dail.addClass("active"),z.el.dail.css("transform","rotate("+z.select_deg+"deg)"),z.el.dail.css("-webkit-transform","rotate("+z.select_deg+"deg)")):(z.el.hr.removeClass("td-on"),z.el.min.removeClass("td-on"),z.el.dail.removeClass("active")),z.anchor.trigger("TDEx-selector",{selector:z.selector?z.selector.hasClass("td-hr")?"hr":"min":null})}function f(t){h(e(this)),z.dailDelay&&clearTimeout(z.dailDelay),z.dailDelay=setTimeout(function(){z.dailDelay=null},100)}function p(e){null==z.dailDelay&&h(null)}function g(e){z.anchor.trigger("TDEx-meridian",{clicked:z.pm?"am":"pm"}),c(z.pm?z.time-43200:z.time+43200)}function v(e){z.anchor.trigger("TDEx-meridian",{clicked:"now"}),T(null)}function w(t){if(z.selector){t.preventDefault(),z.anchor.trigger("TDEx-dailing",{finish:!1,selector:z.selector.hasClass("td-hr")?"hr":"min"}),z.handleShake&&(clearInterval(z.handleShake),z.handleShake=null),z.el.dail.removeClass("td-n"),z.el.dail_handle.removeClass("td-bounce"),z.el.dail_handle.addClass("td-drag"),z.dailing=!0;var a=z.wrapper.offset();z.center={y:a.top+z.wrapper.height()/2,x:a.left+z.wrapper.width()/2};var n="touchstart"==t.type?t.originalEvent.touches[0]:t,r=z.center.y-n.pageY,i=z.center.x-n.pageX,l=Math.atan2(r,i)*z.rad2deg;z.init_deg=l<0?360+l:l,e(window).on("touchmove mousemove",_),e(window).on("touchend mouseup",k)}}function _(e){e.preventDefault();var t="touchmove"==e.type?e.originalEvent.touches[0]:e,a=z.center.y-t.pageY,n=z.center.x-t.pageX,r=Math.atan2(a,n)*z.rad2deg;r<0&&(r=360+r);var i=r-z.init_deg+z.select_deg;i<0?i=360+i:i>360&&(i-=360),z.selector.hasClass("td-hr")?u(i):m(i)}function k(t){t.preventDefault(),z.dailing=!1,z.dailDelay&&clearTimeout(z.dailDelay),z.dailDelay=setTimeout(function(){z.dailDelay=null},100),a.autoSwitch&&h(z.selector.hasClass("td-hr")?z.el.time_min:z.el.time_hr),z.el.dail.addClass("td-n"),z.el.dail_handle.addClass("td-bounce"),z.el.dail_handle.removeClass("td-drag"),e(window).off("touchmove mousemove",_),e(window).off("touchend mouseup",k),z.anchor.trigger("TDEx-dailing",{finish:!0,selector:z.selector.hasClass("td-hr")?"hr":"min"})}function y(e){z.selector&&(e.preventDefault(),e.stopPropagation(),z.handleShake&&(clearInterval(z.handleShake),z.handleShake=null),z.dailing||(z.el.dail.removeClass("td-n"),z.select_deg+=e.originalEvent.wheelDelta/120,z.select_deg<0?z.select_deg=360+z.select_deg:z.select_deg>360&&(z.select_deg=z.select_deg-360),z.selector.hasClass("td-hr")?u(z.select_deg):m(z.select_deg)))}function T(e){var t;if(e||0===e)z.followTime&&(clearInterval(z.followTime),z.followTime=null,z.el.medirian_now.addClass("td-on")),t=e instanceof Date?3600*e.getHours()+60*e.getMinutes()+e.getSeconds():e;else{if(z.followTime)return;z.followTime=setInterval(function(){a=new Date,t=3600*a.getHours()+60*a.getMinutes()+a.getSeconds(),c(t,!0)},500),z.el.medirian_now.removeClass("td-on");var a=new Date;t=3600*a.getHours()+60*a.getMinutes()+a.getSeconds()}t!=z.time&&(z.el.lancet_ptr.addClass("td-n"),c(t,null!==z.followTime),z.anchor.trigger("TDEx-reset",{sourceTime:e}),setTimeout(function(){z.el.lancet_ptr.removeClass("td-n")},500))}function C(){var t=z.anchor.offset(),a=z.anchor.outerWidth(),n=z.anchor.outerHeight();t.right=t.left+a,t.bottom=t.top+n;var r=z.wrapper.offset(),i=z.wrapper.outerWidth(),l=z.wrapper.outerHeight();r.right=r.left+i,r.bottom=r.top+l;var o={top:e(window).scrollTop(),left:e(window).scrollLeft()},d=e(window).width(),s=e(window).height();o.right=o.left+d,o.bottom=o.top+s;var c=Math.round(t.left+(a-i)/2);if(r.left==c&&r.top>=o.top&&r.bottom<=o.bottom&&(r.top==t.bottom||r.bottom==t.top))return!1;var m,u=t.bottom+l<=o.bottom||t.top-l<o.top;if(u){var h=Math.max(t.bottom,o.top);z.wrapper.removeClass("drop-up").css({top:h,bottom:"auto",left:c}),m=h-t.bottom}else{var f=e("body").outerHeight(),p=Math.min(t.top,o.bottom);z.wrapper.addClass("drop-up").css({top:"auto",bottom:f-p,left:c}),m=t.top-p}return z.wrapper.css({opacity:.3+.7/Math.log2(2+(m>>7))}),!0}function x(e){C()}function D(t){if(!z.active){switch(z.wrapper||n(),z.active=!0,z.wrapper.addClass("td-show").removeClass("td-"+a.animation+"out"),a.alwaysOpen||z.wrapper.addClass("td-"+a.animation+"in"),a.handleShake&&(z.handleShake=setInterval(function(){z.el.dail_handle.addClass("td-alert"),setTimeout(function(){z.el.dail_handle.removeClass("td-alert")},1e3)},2e3)),T(t||d(a.fetchTime.call(z.anchor[0]))),a.startFrom){case"hr":h(z.el.time_hr);break;case"min":h(z.el.time_min)}return a.container||(C(),e(window).on("resize scroll",x)),a.watchValueChange&&z.anchor.on("input",S),e(document).on("click",a.alwaysOpen?p:L),z.anchor.trigger("TDEx-show",{}),!0}return!1}function b(){return!(a.alwaysOpen||!z.active)&&(z.active=!1,z.followTime&&(clearInterval(z.followTime),z.followTime=null,z.el.medirian_now.addClass("td-on")),z.handleShake&&(clearInterval(z.handleShake),z.handleShake=null),a.container||(e(window).off("resize",x),e(window).off("scroll",x)),a.watchValueChange&&z.anchor.off("input",S),e(document).off("click",L),setTimeout(function(){h(null),z.wrapper.removeClass("td-show"),z.anchor.trigger("TDEx-hide",{})},700),z.wrapper.addClass("td-"+a.animation+"out").removeClass("td-"+a.animation+"in"),!0)}function M(e,t){return t.contains(e.target)||e.target==t}function S(e){clearTimeout(z.valueChange),z.valueChange=setTimeout(function(){z.valueChange=null;var e=d(a.fetchTime.call(z.anchor[0]));e&&T(e)},200)}function E(e){D()}function L(e){M(e,z.anchor[0])||M(e,z.wrapper[0])||b()}function H(t,a,n){var r="<"+t;return a&&(e.each(a,function(e,t){t.constructor==Array&&(t=t.reduce(function(e,t){return(e||"")+(t?" "+t:"")})),r+=" "+e+'="'+t+'"'}),void 0!==n&&(r+=n?">"+n+"</"+t:"/")),r+">"}function j(t){var n=H("div",{"class":["td-clock",a.inline?"inline":""],id:"td-clock-"+t})+H("div",{"class":"td-clock-wrap"})+H("div",{"class":"td-medirian"},H("span",{"class":["td-am","td-n2"]},l("am"))+H("span",{"class":["td-pm","td-n2"]},l("pm"))+H("span",{"class":["td-now","td-n2","td-on"]},l("reset")))+H("div",{"class":"td-lancette"},H("div",{"class":["td-tick","td-rotate-0"]},"")+H("div",{"class":["td-tick","td-rotate-30"]},"")+H("div",{"class":["td-tick","td-rotate-60"]},"")+H("div",{"class":["td-tick","td-rotate-90"]},"")+H("div",{"class":["td-tick","td-rotate-120"]},"")+H("div",{"class":["td-tick","td-rotate-150"]},"")+H("div",{"class":["td-tick","td-rotate-180"]},"")+H("div",{"class":["td-tick","td-rotate-210"]},"")+H("div",{"class":["td-tick","td-rotate-240"]},"")+H("div",{"class":["td-tick","td-rotate-270"]},"")+H("div",{"class":["td-tick","td-rotate-300"]},"")+H("div",{"class":["td-tick","td-rotate-330"]},"")+H("div",{"class":["td-pointer","td-hr"]},"")+H("div",{"class":["td-pointer","td-min"]},""))+H("div",{"class":"td-time"},H("span",{"class":["td-hr","td-n2"]},"")+":"+H("span",{"class":["td-min","td-n2"]},""))+H("div",{"class":["td-dail","td-n"]})+H("div",{"class":"td-handle"},H("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xml:space":"preserve",version:"1.1",x:"0px",y:"0px",viewBox:"0 0 100 35.4","enable-background":"new 0 0 100 35.4"},H("g",{},H("path",{fill:"none","stroke-width":1.2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10,d:"M98.1,33C85.4,21.5,68.5,14.5,50,14.5S14.6,21.5,1.9,33"},"")+H("line",{fill:"none","stroke-width":1.2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10,x1:1.9,y1:33,x2:1.9,y2:28.6},"")+H("line",{fill:"none","stroke-width":1.2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10,x1:1.9,y1:33,x2:6.3,y2:33},"")+H("line",{fill:"none","stroke-width":1.2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10,x1:98.1,y1:33,x2:93.7,y2:33},"")+H("line",{fill:"none","stroke-width":1.2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10,x1:98.1,y1:33,x2:98.1,y2:28.6},""))))+H("/div")+H("/div")+H("/div");return e(n)}a=e.extend({inline:!1,autoStart:!1,alwaysOpen:!1,dropTrigger:!0,watchValueChange:!0,format:"hh:mm A",language:void 0,fetchTime:function(){return e(this).val()},putTime:function(t){t!=e(this).val()&&e(this).val(t).change()},autoSwitch:!0,meridians:!0,mousewheel:!0,showLancets:!0,animation:"drop",container:void 0,startFrom:"hr",handleShake:!1,stickyMinute:20,stickyHour:480},a),a.alwaysOpen&&(a.autoStart=!0,a.dropTrigger=!1);var z={anchor:e(this),wrapper:void 0,el:{},locale:"default",localizer:{},fblocalizer:{},formatter:t(),monthFormat:"??",dailing:!1,handleShake:null,followTime:null,dailDelay:null,selector:null,time:0,h_deg:0,m_deg:0,pm:!1,select_deg:0,init_deg:void 0,rad2deg:180/Math.PI,center:void 0,active:!1};return z.anchor.data("TDEx",{show:function(e){return r(),D(e)},hide:function(){return r(),b()},select:function(e){switch(r(!0),e){case"hr":h(z.el.time_hr);break;case"min":h(z.el.time_min);break;default:h(null)}},getTime:function(){r(!0);var e=Math.floor(z.time/3600),t=z.time%3600,a=Math.floor(t/60);return[z.time,s(e,a,t%60)]},isActive:function(){return r(),z.active},isDailing:function(){return r(),z.dailing},setTime:function(e,t){return T(e),t||h(null),e},setTimeText:function(e){r(!0);var t=d(e);return t?c(t):t},wrapper:function(){return r(!0),z.wrapper},anchor:function(){return r(),z.anchor},destroy:function(){r(),z.anchor.trigger("TDEx-destroy",{}),z.anchor.off("click",E),z.anchor.data("TDEx",void 0),z.wrapper&&z.wrapper.remove(),z.wrapper=null,e(document).off("click",L),e(document).off("click",p)}}),a.dropTrigger&&z.anchor.on("click",E),a.autoStart&&setTimeout(D.bind(this),0),this}});